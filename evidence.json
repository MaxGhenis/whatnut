{"version":3,"kind":"Notebook","sha256":"e0f658a1edadff31e048f727f17ae44aa7db1f1904a94ef1b0f9c67e0bf2a2e5","slug":"evidence","location":"/notebooks/evidence.ipynb","dependencies":[],"frontmatter":{"title":"Evidence Review","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"authors":[{"nameParsed":{"literal":"Max Ghenis","given":"Max","family":"Ghenis"},"name":"Max Ghenis","email":"max@maxghenis.com","id":"contributors-myst-generated-uid-0","corresponding":true}],"license":{"content":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/MaxGhenis/whatnut","numbering":{"title":{"offset":1}},"source_url":"https://github.com/MaxGhenis/whatnut/blob/master/docs/notebooks/evidence.ipynb","edit_url":"https://github.com/MaxGhenis/whatnut/edit/master/docs/notebooks/evidence.ipynb","exports":[{"format":"ipynb","filename":"evidence.ipynb","url":"/whatnut//build/evidence-a1a67a9513db9c8c06707a5440f4f86c.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook reviews all primary sources used in the analysis.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XKBP2DPdl6"}],"key":"K8N1yHQyCD"}],"key":"A7WbQ6Mh6a"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from whatnut.evidence import SOURCES, validate_sources\nimport pandas as pd","key":"QdDeQNWNA0"},{"type":"outputs","id":"fqjiOEtoQZPuYvVWQzmjR","children":[],"key":"C8aILx5nNJ"}],"key":"f1blx0Kjrs"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"All Sources","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QRWLwMjuoD"}],"identifier":"all-sources","label":"All Sources","html_id":"all-sources","implicit":true,"key":"ZBmN9YDi8A"}],"key":"pkRtcIvVdj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Convert sources to DataFrame for display\nsource_data = []\nfor s in SOURCES:\n    source_data.append({\n        'ID': s.id,\n        'Type': s.study_type,\n        'Citation': s.citation[:60] + '...' if len(s.citation) > 60 else s.citation,\n        'Key Finding': s.key_finding,\n        'Sample Size': s.sample_size,\n    })\n\npd.DataFrame(source_data)","key":"a6bsjI5B6L"},{"type":"outputs","id":"6kdrYnm50pZreRXdZd7om","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/plain":{"content":"                 ID           Type  \\\n0          aune2016  meta_analysis   \n1           bao2013         cohort   \n2        grosso2015  meta_analysis   \n3      delgobbo2015  meta_analysis   \n4        guasch2017         cohort   \n5  predimed_walnuts            rct   \n6          waha2021            rct   \n7          usda_fdc       database   \n8     fda_macadamia     regulatory   \n\n                                            Citation  \\\n0  Aune D, Keum N, Giovannucci E, et al. Nut cons...   \n1  Bao Y, Han J, Hu FB, et al. Association of nut...   \n2  Grosso G, Yang J, Marventano S, et al. Nut con...   \n3  Del Gobbo LC, Falk MC, Feldman R, et al. Effec...   \n4  Guasch-Ferré M, Liu X, Malik VS, et al. Nut Co...   \n5  Ros E, et al. PREDIMED Study. Effects of a Med...   \n6  Rajaram S, et al. Walnuts and Healthy Aging (W...   \n7  U.S. Department of Agriculture, Agricultural R...   \n8  FDA. Qualified Health Claims: Letter of Enforc...   \n\n                                         Key Finding  Sample Size  \n0  28g/day nut consumption associated with 22% re...     819448.0  \n1  7+ servings/week associated with 20% reduced m...     118962.0  \n2  Highest vs lowest nut intake: 19% reduced all-...     354933.0  \n3  Pistachios ranked #1 for LDL and triglyceride ...       2582.0  \n4  Walnut consumption specifically associated wit...     210836.0  \n5  Mediterranean diet + walnuts reduced CVD event...        772.0  \n6  2-year walnut supplementation improved lipid p...        708.0  \n7  Standardized nutrient composition data for all...          NaN  \n8  FDA permits qualified health claim for macadam...          NaN  ","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>ID</th>\n      <th>Type</th>\n      <th>Citation</th>\n      <th>Key Finding</th>\n      <th>Sample Size</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>aune2016</td>\n      <td>meta_analysis</td>\n      <td>Aune D, Keum N, Giovannucci E, et al. Nut cons...</td>\n      <td>28g/day nut consumption associated with 22% re...</td>\n      <td>819448.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>bao2013</td>\n      <td>cohort</td>\n      <td>Bao Y, Han J, Hu FB, et al. Association of nut...</td>\n      <td>7+ servings/week associated with 20% reduced m...</td>\n      <td>118962.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>grosso2015</td>\n      <td>meta_analysis</td>\n      <td>Grosso G, Yang J, Marventano S, et al. Nut con...</td>\n      <td>Highest vs lowest nut intake: 19% reduced all-...</td>\n      <td>354933.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>delgobbo2015</td>\n      <td>meta_analysis</td>\n      <td>Del Gobbo LC, Falk MC, Feldman R, et al. Effec...</td>\n      <td>Pistachios ranked #1 for LDL and triglyceride ...</td>\n      <td>2582.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>guasch2017</td>\n      <td>cohort</td>\n      <td>Guasch-Ferré M, Liu X, Malik VS, et al. Nut Co...</td>\n      <td>Walnut consumption specifically associated wit...</td>\n      <td>210836.0</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>predimed_walnuts</td>\n      <td>rct</td>\n      <td>Ros E, et al. PREDIMED Study. Effects of a Med...</td>\n      <td>Mediterranean diet + walnuts reduced CVD event...</td>\n      <td>772.0</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>waha2021</td>\n      <td>rct</td>\n      <td>Rajaram S, et al. Walnuts and Healthy Aging (W...</td>\n      <td>2-year walnut supplementation improved lipid p...</td>\n      <td>708.0</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>usda_fdc</td>\n      <td>database</td>\n      <td>U.S. Department of Agriculture, Agricultural R...</td>\n      <td>Standardized nutrient composition data for all...</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>fda_macadamia</td>\n      <td>regulatory</td>\n      <td>FDA. Qualified Health Claims: Letter of Enforc...</td>\n      <td>FDA permits qualified health claim for macadam...</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}},"key":"noVYBQRiDO"}],"key":"lwFiyDG8xK"}],"key":"XOrrqUhPCz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Effect Sizes from Meta-Analyses","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rzXVAmFz2l"}],"identifier":"effect-sizes-from-meta-analyses","label":"Effect Sizes from Meta-Analyses","html_id":"effect-sizes-from-meta-analyses","implicit":true,"key":"eQIQMg4QVK"}],"key":"nGxovNQ1oZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"effect_data = []\nfor s in SOURCES:\n    if s.effect_size is not None:\n        effect_data.append({\n            'Source': s.id,\n            'Metric': s.effect_size.metric,\n            'Point Estimate': s.effect_size.point_estimate,\n            'CI Lower': s.effect_size.ci_lower,\n            'CI Upper': s.effect_size.ci_upper,\n        })\n\npd.DataFrame(effect_data)","key":"kLyl1UUj0F"},{"type":"outputs","id":"pe514ZBwYo3XVdoD8e1Ir","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"         Source           Metric  Point Estimate  CI Lower  CI Upper\n0      aune2016    relative_risk            0.78      0.72      0.84\n1       bao2013     hazard_ratio            0.80      0.73      0.86\n2    grosso2015    relative_risk            0.81      0.77      0.85\n3  delgobbo2015  mean_difference           -4.80     -6.30     -3.30\n4    guasch2017     hazard_ratio            0.79      0.70      0.88","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Source</th>\n      <th>Metric</th>\n      <th>Point Estimate</th>\n      <th>CI Lower</th>\n      <th>CI Upper</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>aune2016</td>\n      <td>relative_risk</td>\n      <td>0.78</td>\n      <td>0.72</td>\n      <td>0.84</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>bao2013</td>\n      <td>hazard_ratio</td>\n      <td>0.80</td>\n      <td>0.73</td>\n      <td>0.86</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>grosso2015</td>\n      <td>relative_risk</td>\n      <td>0.81</td>\n      <td>0.77</td>\n      <td>0.85</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>delgobbo2015</td>\n      <td>mean_difference</td>\n      <td>-4.80</td>\n      <td>-6.30</td>\n      <td>-3.30</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>guasch2017</td>\n      <td>hazard_ratio</td>\n      <td>0.79</td>\n      <td>0.70</td>\n      <td>0.88</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}},"key":"kWgfKHD0oz"}],"key":"eNbaGajP7O"}],"key":"PIAlhKaDGu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Validation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CxLbiTa4dO"}],"identifier":"validation","label":"Validation","html_id":"validation","implicit":true,"key":"HgOw4lhyJw"}],"key":"tISwPigKyU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"errors = validate_sources()\nif errors:\n    print(\"Validation errors:\")\n    for e in errors:\n        print(f\"  - {e}\")\nelse:\n    print(\"✓ All sources pass validation\")","key":"p1jgL3ltH8"},{"type":"outputs","id":"eatFFV5INHgB6pTHUqPuX","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"stream","name":"stdout","text":"✓ All sources pass validation\n"},"key":"ByrwAdLpEb"}],"key":"BlgJKngdkF"}],"key":"YoqRC4TO4V"}],"key":"JXNU0BUFPs"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Methodology","url":"/methodology","group":"What Nut?"},"next":{"title":"Monte Carlo Simulation","url":"/simulation","group":"Analysis"}}},"domain":"http://localhost:3007"}